<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RealDiag - Diagnostic</title>
    <style>
      body{font-family:system-ui, -apple-system, 'Segoe UI', Roboto, Arial; padding:2rem;}
      header{margin-bottom:1rem}
      a.button{background:#007acc;color:white;padding:.5rem 1rem;border-radius:6px;text-decoration:none}
      pre{background:#f6f8fa;padding:1rem;border-radius:6px}
    </style>
  </head>
  <body>
    <header>
      <h1>RealDiag â€” Diagnostic UI</h1>
      <p>Minimal frontend that links to the backend API and docs.</p>
      <p>
        <a class="button" href="/">Home</a>
        <a class="button" href="http://localhost:8000/docs" style="margin-left:.5rem">API Docs</a>
      </p>
    </header>

    <section>
      <h2>Backend checks</h2>
      <p>Call the backend health and version endpoints:</p>
      <pre id="result">Checking backend...</pre>
    </section>

    <script>
      // Use runtime-config if available; fall back to the Render backend URL.
      const API_BASE = (window.__RUNTIME_CONFIG && window.__RUNTIME_CONFIG.NEXT_PUBLIC_API_BASE) || 'https://realdiag-software.onrender.com';
      async function check(){
        try{
          const h = await fetch(API_BASE + '/health');
          const hv = await h.json();
          const v = await fetch(API_BASE + '/version');
          const j = await v.json();
          document.getElementById('result').textContent = JSON.stringify({health: hv, version: j}, null, 2);
        }catch(e){
          document.getElementById('result').textContent = 'Unable to contact backend: ' + e;
        }
      }
      check();
    </script>
  </body>
</html>
